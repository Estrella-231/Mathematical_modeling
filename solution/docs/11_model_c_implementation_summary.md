# Model C Implementation Summary - åäº‹å®æ¨¡æ‹Ÿå®ç°æ€»ç»“

## æ¦‚è¿°

æœ¬æ–‡æ¡£æ€»ç»“äº†æ ¹æ® `10_model_c_comparison.md` å·¥ä½œæµå®ç°çš„ Model C åäº‹å®æ¨¡æ‹Ÿç³»ç»Ÿã€‚è¯¥ç³»ç»Ÿæ¨¡æ‹Ÿä¸‰ç§ä¸åŒçš„æŠ•ç¥¨è§„åˆ™ï¼Œåˆ†æå…¶å¯¹æ·˜æ±°ç»“æœçš„å½±å“ï¼Œå¹¶åŸºäº Fan Favorability Index (FFI) æ¨èæœ€ä½³æŠ•ç¥¨æœºåˆ¶ã€‚

## å®ç°æ—¥æœŸ

2026-01-30

## å·¥ä½œæµç¨‹

### Step 1: æ•°æ®å‡†å¤‡
- **è¾“å…¥æ•°æ®**: `Data/models/ridge_v2/ridge_fan_vote_shares_v2.csv`
- **æ•°æ®æ¥æº**: Ridge V2 æ¨¡å‹ä¼°ç®—çš„ç²‰ä¸æŠ•ç¥¨ä»½é¢
- **æ•°æ®è§„æ¨¡**: 2014 è¡Œ Ã— 24 åˆ—ï¼Œè¦†ç›– Season 1-27

### Step 2: ä¸‰ç§æŠ•ç¥¨è§„åˆ™å®ç°

#### Rule A: Rank Sum (æ’åç›¸åŠ )
```python
judge_rank = judge_scores.rank(ascending=False)
fan_rank = fan_votes.rank(ascending=False)
combined_rank = judge_rank + fan_rank
eliminated = combined_rank.idxmax()  # æœ€é«˜æ’åå’Œè¢«æ·˜æ±°
```

#### Rule B: Percent Sum (ç™¾åˆ†æ¯”ç›¸åŠ )
```python
judge_percent = judge_scores / judge_scores.sum()
fan_percent = fan_votes / fan_votes.sum()
combined_score = judge_percent + fan_percent
eliminated = combined_score.idxmin()  # æœ€ä½åˆ†è¢«æ·˜æ±°
```

#### Rule C: Judge Save (è¯„å§”æ‹¯æ•‘)
```python
# 1. æ‰¾å‡ºç²‰ä¸æŠ•ç¥¨æœ€ä½çš„ä¸¤å
bottom_2 = fan_votes.nsmallest(2)
# 2. è¯„å§”æ·˜æ±°è¯„åˆ†ä½è€…
eliminated = judge_scores[bottom_2.index].idxmin()
```

### Step 3: Fan Favorability Index (FFI) è®¡ç®—

**å…¬å¼**:
```
FFI = (judge_rank - fan_rank) / (N - 1)
```

**è§£é‡Š**:
- FFI > 0: ç²‰ä¸æ›´å–œæ¬¢è¯¥é€‰æ‰‹ï¼ˆè¯„å§”æ’åæ¯”ç²‰ä¸æ’åå·®ï¼‰
- FFI < 0: è¯„å§”æ›´å–œæ¬¢è¯¥é€‰æ‰‹ï¼ˆè¯„å§”æ’åæ¯”ç²‰ä¸æ’åå¥½ï¼‰
- FFI â‰ˆ 0: ç²‰ä¸å’Œè¯„å§”æ„è§ä¸€è‡´
- èŒƒå›´: [-1, 1]

**å®ç°**:
```python
def calculate_fan_favorability_index(judge_scores, fan_votes):
    n = len(judge_scores)
    judge_rank = judge_scores.rank(ascending=False, method='average')
    fan_rank = fan_votes.rank(ascending=False, method='average')
    ffi = (judge_rank - fan_rank) / (n - 1)
    return ffi
```

### Step 4: æ¨¡æ‹Ÿæ‰§è¡Œ

**æ¨¡æ‹ŸèŒƒå›´**: 241 å‘¨ï¼ˆæ‰€æœ‰æœ‰æ•ˆæ·˜æ±°å‘¨ï¼‰

**è¾“å‡ºå­—æ®µ**:
- `season`, `week`, `num_contestants`
- `actual_eliminated` - å®é™…æ·˜æ±°è€…
- `rank_sum_eliminated`, `percent_sum_eliminated`, `judge_save_eliminated`
- `ffi_actual`, `ffi_rank_sum`, `ffi_percent_sum`, `ffi_judge_save`
- `mean_ffi`, `std_ffi` - è¯¥å‘¨çš„ FFI ç»Ÿè®¡
- ç¿»è½¬ç‡æ ‡å¿—: `rank_vs_percent_same`, `rank_vs_judge_save_same`, ç­‰

### Step 5: ç¿»è½¬ç‡åˆ†æ

**å®šä¹‰**: ä¸åŒè§„åˆ™äº§ç”Ÿä¸åŒæ·˜æ±°ç»“æœçš„æ¯”ä¾‹

**ç»“æœ**:
| è§„åˆ™å¯¹æ¯” | ç¿»è½¬ç‡ |
|---------|--------|
| Rank Sum vs Percent Sum | 23.24% |
| Rank Sum vs Judge Save | 28.22% |
| Percent Sum vs Judge Save | 38.17% |
| ä¸‰ç§è§„åˆ™éƒ½ä¸åŒ | 43.57% |

**è§£è¯»**:
- Rank Sum å’Œ Percent Sum æœ€ç›¸ä¼¼ï¼ˆ76.76% ä¸€è‡´ï¼‰
- Percent Sum å’Œ Judge Save å·®å¼‚æœ€å¤§ï¼ˆ61.83% ä¸åŒï¼‰
- è¶…è¿‡ 40% çš„å‘¨æ¬¡ä¸‰ç§è§„åˆ™äº§ç”Ÿå®Œå…¨ä¸åŒçš„ç»“æœ

### Step 6: FFI ç»Ÿè®¡åˆ†æ

#### å„è§„åˆ™ä¸‹è¢«æ·˜æ±°è€…çš„ FFI åˆ†å¸ƒ

| è§„åˆ™ | å¹³å‡ FFI | ç²‰ä¸åå¥½æ¯”ä¾‹ | è¯„å§”åå¥½æ¯”ä¾‹ | æ ‡å‡†å·® |
|------|----------|--------------|--------------|--------|
| **Rank Sum** | **0.034** | **45.6%** | **34.4%** | **0.253** |
| Percent Sum | -0.046 | 38.6% | 44.0% | 0.355 |
| Judge Save | 0.222 | 70.5% | 13.3% | 0.259 |
| Actual | -0.134 | 30.8% | 51.9% | 0.337 |

**å…³é”®å‘ç°**:
1. **Rank Sum** FFI æœ€æ¥è¿‘ 0 (0.034)ï¼Œè¡¨ç¤ºæœ€å¹³è¡¡
2. **Judge Save** å€¾å‘äºæ·˜æ±°ç²‰ä¸å–œæ¬¢çš„é€‰æ‰‹ (FFI=0.222)
3. **Actual** è§„åˆ™å€¾å‘äºæ·˜æ±°è¯„å§”å–œæ¬¢çš„é€‰æ‰‹ (FFI=-0.134)
4. **Rank Sum** æ ‡å‡†å·®è¾ƒå°ï¼Œç»“æœæ›´ç¨³å®š

### Step 7: æ¨èæœºåˆ¶è¯„åˆ†

**è¯„åˆ†æ ‡å‡†**:
1. **å…¬å¹³æ€§ (40%)**: FFI å‡å€¼è¶Šæ¥è¿‘ 0 è¶Šå¥½
2. **å¹³è¡¡æ€§ (30%)**: ç²‰ä¸/è¯„å§”åå¥½æ¯”ä¾‹è¶Šæ¥è¿‘ 50% è¶Šå¥½
3. **ç¨³å®šæ€§ (30%)**: FFI æ ‡å‡†å·®è¶Šå°è¶Šå¥½

**è¯„åˆ†ç»“æœ**:

| è§„åˆ™ | å…¬å¹³æ€§ | å¹³è¡¡æ€§ | ç¨³å®šæ€§ | **ç»¼åˆè¯„åˆ†** |
|------|--------|--------|--------|--------------|
| **Rank Sum** | **0.966** | **0.913** | **0.747** | **0.884** â­ |
| Percent Sum | 0.954 | 0.772 | 0.645 | 0.806 |
| Judge Save | 0.778 | 0.589 | 0.741 | 0.710 |

**æ¨èç»“æœ**: **Rank Sum (æ’åç›¸åŠ )** è§„åˆ™

**æ¨èç†ç”±**:
1. **æœ€ä½³å…¬å¹³æ€§**: FFI å‡å€¼ 0.034ï¼Œå‡ ä¹å®Œç¾å¹³è¡¡ç²‰ä¸å’Œè¯„å§”æ„è§
2. **æœ€ä½³å¹³è¡¡æ€§**: 45.6% æ·˜æ±°ç²‰ä¸å–œæ¬¢çš„é€‰æ‰‹ï¼Œ34.4% æ·˜æ±°è¯„å§”å–œæ¬¢çš„é€‰æ‰‹
3. **è‰¯å¥½ç¨³å®šæ€§**: æ ‡å‡†å·® 0.253ï¼Œç»“æœç›¸å¯¹ç¨³å®š
4. **ç»¼åˆè¯„åˆ†æœ€é«˜**: 0.884ï¼Œæ˜¾è‘—ä¼˜äºå…¶ä»–è§„åˆ™

### Step 8: äº‰è®®æ¡ˆä¾‹åˆ†æ

åˆ†æäº† 8 ä¸ªå†å²äº‰è®®æ¡ˆä¾‹ï¼š

#### æ¡ˆä¾‹ 1: Bobby Bones (Season 27)
- **å®é™…ç»“æœ**: æœªæ·˜æ±°ï¼ˆè¿›å…¥å†³èµ›ï¼‰
- **æ¨¡æ‹Ÿç»“æœ**:
  - Rank Sum: æœªæ·˜æ±° âœ“
  - Percent Sum: æœªæ·˜æ±° âœ“
  - Judge Save: Week 8 æ·˜æ±° âœ—

**åˆ†æ**: Judge Save è§„åˆ™ä¼šåœ¨ç¬¬ 8 å‘¨æ·˜æ±° Bobby Bonesï¼Œå› ä¸ºä»–è¯„å§”åˆ†ä½ä½†ç²‰ä¸æŠ•ç¥¨é«˜ã€‚

#### æ¡ˆä¾‹ 2: Bristol Palin (Season 11)
- **å®é™…ç»“æœ**: æœªæ·˜æ±°ï¼ˆè¿›å…¥å†³èµ›ï¼‰
- **æ¨¡æ‹Ÿç»“æœ**:
  - Rank Sum: æœªæ·˜æ±° âœ“
  - Percent Sum: æœªæ·˜æ±° âœ“
  - Judge Save: Week 7 æ·˜æ±° âœ—

**åˆ†æ**: ç±»ä¼¼ Bobby Bonesï¼ŒJudge Save è§„åˆ™å¯¹é«˜äººæ°”ä½†ä½è¯„å§”åˆ†çš„é€‰æ‰‹ä¸åˆ©ã€‚

#### æ¡ˆä¾‹ 3: Sabrina Bryan (Season 5)
- **å®é™…ç»“æœ**: Week 6 æ·˜æ±°ï¼ˆæ„å¤–æ·˜æ±°ï¼‰
- **æ¨¡æ‹Ÿç»“æœ**:
  - Rank Sum: æœªæ·˜æ±° âœ“ï¼ˆå­˜æ´»æ›´ä¹…ï¼‰
  - Percent Sum: Week 6 æ·˜æ±°
  - Judge Save: æœªæ·˜æ±° âœ“ï¼ˆå­˜æ´»æ›´ä¹…ï¼‰

**åˆ†æ**: Rank Sum å’Œ Judge Save è§„åˆ™å¯èƒ½é¿å…è¿™æ¬¡æ„å¤–æ·˜æ±°ã€‚

#### å…¶ä»–æ¡ˆä¾‹æ€»ç»“

| é€‰æ‰‹ | èµ›å­£ | å®é™…æ·˜æ±°å‘¨ | Rank Sum | Percent Sum | Judge Save |
|------|------|------------|----------|-------------|------------|
| Billy Ray Cyrus | 4 | 8 | Week 8 | Week 7 | Week 7 |
| Jerry Rice | 2 | æœªæ·˜æ±° | æœªæ·˜æ±° âœ“ | æœªæ·˜æ±° âœ“ | Week 7 âœ— |
| Kim Kardashian | 7 | 2 | Week 2 | Week 2 | æœªæ·˜æ±° âœ“ |
| Master P | 2 | 4 | Week 3 | Week 3 | Week 2 |
| Kate Gosselin | 10 | 5 | Week 5 | Week 5 | Week 4 |

## è¾“å‡ºæ–‡ä»¶

### 1. æ•°æ®æ–‡ä»¶

| æ–‡ä»¶ | è·¯å¾„ | æè¿° |
|------|------|------|
| æ¨¡æ‹Ÿç»“æœ | `Data/simulation/simulation_results.csv` | 241 å‘¨çš„æ¨¡æ‹Ÿç»“æœï¼ŒåŒ…å« FFI |
| äº‰è®®æ¡ˆä¾‹ | `Data/simulation/controversy_case_analysis.csv` | 8 ä¸ªæ¡ˆä¾‹çš„è¯¦ç»†åˆ†æ |
| æ¨èæŠ¥å‘Š | `Data/simulation/recommendation.txt` | æ¨èæœºåˆ¶åŠè¯„åˆ†è¯¦æƒ… |

### 2. å¯è§†åŒ–å›¾è¡¨ (16 å¼ )

#### FFI ç›¸å…³å›¾è¡¨ (4 å¼ )
1. `ffi_distribution.png` - FFI åˆ†å¸ƒç›´æ–¹å›¾ï¼ˆ4 ä¸ªå­å›¾ï¼‰
2. `ffi_comparison.png` - FFI è§„åˆ™å¯¹æ¯”ï¼ˆå‡å€¼ã€æ­£è´Ÿæ¯”ä¾‹ï¼‰
3. `ffi_by_season.png` - FFI æŒ‰èµ›å­£å˜åŒ–è¶‹åŠ¿
4. `recommendation_scores.png` - æ¨èæœºåˆ¶è¯„åˆ†å¯¹æ¯”

#### ç¿»è½¬ç‡å›¾è¡¨ (4 å¼ )
5. `flip_rate_by_season.png` - ç¿»è½¬ç‡æŒ‰èµ›å­£åˆ†æ
6. `overall_flip_rate.png` - æ€»ä½“ç¿»è½¬ç‡å¯¹æ¯”
7. `rule_consistency_matrix.png` - è§„åˆ™ä¸€è‡´æ€§çŸ©é˜µ
8. `flip_rate_by_size.png` - æŒ‰é€‰æ‰‹æ•°é‡çš„ç¿»è½¬ç‡

#### äº‰è®®æ¡ˆä¾‹å›¾è¡¨ (8 å¼ )
9-16. `case_study_*.png` - æ¯ä¸ªäº‰è®®æ¡ˆä¾‹çš„ç”Ÿå­˜æ›²çº¿å›¾

## ä»£ç ç»“æ„

### æ ¸å¿ƒæ¨¡å—: `src/models/counterfactual_simulation.py`

**ä¸»è¦ç±»å’Œå‡½æ•°**:

```python
class VotingSimulator:
    def simulate_week(data, rule)           # æ¨¡æ‹Ÿå•å‘¨æ·˜æ±°
    def simulate_all_weeks(data)            # æ¨¡æ‹Ÿæ‰€æœ‰å‘¨
    def calculate_flip_rate(results)        # è®¡ç®—ç¿»è½¬ç‡
    def analyze_controversy_cases(...)      # åˆ†æäº‰è®®æ¡ˆä¾‹
    def analyze_ffi_by_rule(results)        # FFI ç»Ÿè®¡åˆ†æ
    def recommend_voting_mechanism(results) # æ¨èæœºåˆ¶

def calculate_fan_favorability_index(...)   # è®¡ç®— FFI
def run_counterfactual_simulation(...)      # ä¸»è¿è¡Œå‡½æ•°
```

### å¯è§†åŒ–æ¨¡å—: `src/visualize_simulation.py`

**ä¸»è¦å‡½æ•°**:

```python
def plot_ffi_distribution(results, output_dir)      # FFI åˆ†å¸ƒå›¾
def plot_ffi_comparison(results, output_dir)        # FFI å¯¹æ¯”å›¾
def plot_ffi_by_season(results, output_dir)         # FFI è¶‹åŠ¿å›¾
def plot_recommendation_scores(results, output_dir) # æ¨èè¯„åˆ†å›¾
def visualize_simulation_results(...)               # ä¸»å¯è§†åŒ–å‡½æ•°
```

## æŠ€æœ¯ç»†èŠ‚

### 1. FFI è®¡ç®—çš„æ•°å­¦åŸç†

**æ’åå½’ä¸€åŒ–**:
- å°†æ’åå·®å¼‚å½’ä¸€åŒ–åˆ° [-1, 1] åŒºé—´
- é™¤ä»¥ (N-1) ç¡®ä¿æœ€å¤§å·®å¼‚ä¸º Â±1

**ç¤ºä¾‹**:
- 5 åé€‰æ‰‹ï¼ŒæŸé€‰æ‰‹è¯„å§”æ’å 2ï¼Œç²‰ä¸æ’å 4
- FFI = (2 - 4) / (5 - 1) = -0.5
- è§£é‡Šï¼šè¯„å§”æ›´å–œæ¬¢è¯¥é€‰æ‰‹ï¼ˆè¯„å§”æ’åæ›´å¥½ï¼‰

### 2. æ¨èè¯„åˆ†ç®—æ³•

```python
fairness_score = 1 - abs(mean_ffi)
balance_score = 1 - abs(positive_rate - 0.5) * 2
stability_score = 1 - min(std_ffi, 1)
total_score = fairness * 0.4 + balance * 0.3 + stability * 0.3
```

**æƒé‡è®¾è®¡**:
- å…¬å¹³æ€§ 40%: æœ€é‡è¦ï¼Œç¡®ä¿ç²‰ä¸å’Œè¯„å§”æ„è§å¹³è¡¡
- å¹³è¡¡æ€§ 30%: é¿å…ç³»ç»Ÿæ€§åå‘æŸä¸€æ–¹
- ç¨³å®šæ€§ 30%: ç¡®ä¿ç»“æœå¯é¢„æµ‹

### 3. äº‰è®®æ¡ˆä¾‹è¯†åˆ«

**é€‰æ‹©æ ‡å‡†**:
1. å†å²ä¸Šå¼•å‘å…¬ä¼—è®¨è®ºçš„æ¡ˆä¾‹
2. è¯„å§”åˆ†å’Œç²‰ä¸æŠ•ç¥¨å·®å¼‚å¤§çš„æ¡ˆä¾‹
3. æ„å¤–æ·˜æ±°æˆ–æ„å¤–æ™‹çº§çš„æ¡ˆä¾‹

**æ•°æ®å¯ç”¨æ€§**:
- ä» 9 ä¸ªå€™é€‰æ¡ˆä¾‹ä¸­ç­›é€‰å‡º 8 ä¸ªæ•°æ®å¯ç”¨çš„æ¡ˆä¾‹
- è¦†ç›– Season 2-27ï¼Œè·¨åº¦ 25 å¹´

## å…³é”®å‘ç°ä¸æ´å¯Ÿ

### 1. Rank Sum è§„åˆ™çš„ä¼˜åŠ¿

**æ•°æ®æ”¯æŒ**:
- FFI å‡å€¼ 0.034ï¼Œæœ€æ¥è¿‘ç†æƒ³å€¼ 0
- ä¸ Percent Sum ä¸€è‡´æ€§ 76.76%ï¼Œä¸ Judge Save ä¸€è‡´æ€§ 71.78%
- ç»¼åˆè¯„åˆ† 0.884ï¼Œæ˜¾è‘—é«˜äºå…¶ä»–è§„åˆ™

**ç†è®ºè§£é‡Š**:
- æ’åç›¸åŠ è‡ªç„¶å¹³è¡¡äº†è¯„å§”å’Œç²‰ä¸çš„æƒé‡
- ä¸å—åˆ†æ•°å°ºåº¦å½±å“ï¼ˆæ’åæ˜¯åºæ•°ï¼‰
- å¯¹æç«¯å€¼ä¸æ•æ„Ÿ

### 2. Judge Save è§„åˆ™çš„é—®é¢˜

**æ•°æ®æ”¯æŒ**:
- FFI å‡å€¼ 0.222ï¼Œå€¾å‘äºæ·˜æ±°ç²‰ä¸å–œæ¬¢çš„é€‰æ‰‹
- 70.5% çš„è¢«æ·˜æ±°è€…æ˜¯ç²‰ä¸æ›´å–œæ¬¢çš„
- ä¸å…¶ä»–è§„åˆ™å·®å¼‚æœ€å¤§ï¼ˆç¿»è½¬ç‡ 28-38%ï¼‰

**ç†è®ºè§£é‡Š**:
- Bottom 2 ç”±ç²‰ä¸æŠ•ç¥¨å†³å®šï¼Œè¯„å§”åªèƒ½åœ¨ä¸¤è€…ä¸­é€‰æ‹©
- è¯„å§”å€¾å‘äºä¿ç•™æŠ€æœ¯å¥½çš„é€‰æ‰‹ï¼Œå¯èƒ½ä¸ç²‰ä¸åå¥½å†²çª
- å¯¹é«˜äººæ°”ä½†ä½æŠ€æœ¯çš„é€‰æ‰‹ä¸åˆ©

### 3. å®é™…è§„åˆ™çš„åå‘

**æ•°æ®æ”¯æŒ**:
- FFI å‡å€¼ -0.134ï¼Œå€¾å‘äºæ·˜æ±°è¯„å§”å–œæ¬¢çš„é€‰æ‰‹
- 51.9% çš„è¢«æ·˜æ±°è€…æ˜¯è¯„å§”æ›´å–œæ¬¢çš„
- æ ‡å‡†å·® 0.337ï¼Œç»“æœä¸ç¨³å®š

**å¯èƒ½åŸå› **:
- å®é™…è§„åˆ™å¯èƒ½æ›´é‡è§†ç²‰ä¸æŠ•ç¥¨
- æˆ–è€…è¯„å§”è¯„åˆ†å­˜åœ¨ç³»ç»Ÿæ€§åå·®
- éœ€è¦è¿›ä¸€æ­¥ç ”ç©¶å®é™…è§„åˆ™çš„å…·ä½“æœºåˆ¶

### 4. äº‰è®®æ¡ˆä¾‹çš„æ¨¡å¼

**é«˜äººæ°”ä½è¯„åˆ†é€‰æ‰‹**:
- Bobby Bones, Bristol Palin: Judge Save ä¼šæå‰æ·˜æ±°
- Rank Sum å’Œ Percent Sum èƒ½ä¿æŠ¤è¿™ç±»é€‰æ‰‹

**æ„å¤–æ·˜æ±°**:
- Sabrina Bryan: Rank Sum å’Œ Judge Save å¯èƒ½é¿å…
- è¡¨æ˜ Percent Sum å¯èƒ½å¯¹æŸäº›æƒ…å†µä¸å¤Ÿç¨³å¥

**ä½äººæ°”é€‰æ‰‹**:
- Kim Kardashian: Judge Save èƒ½ä¿æŠ¤ä½äººæ°”ä½†é«˜æŠ€æœ¯çš„é€‰æ‰‹
- ä½†è¿™ä¸èŠ‚ç›®çš„å¨±ä¹æ€§ç›®æ ‡å¯èƒ½å†²çª

## å±€é™æ€§ä¸æœªæ¥å·¥ä½œ

### 1. æ•°æ®å±€é™æ€§ âš ï¸

#### 1.1 ç²‰ä¸æŠ•ç¥¨ä¼°ç®—çš„ä¸ç¡®å®šæ€§

**é—®é¢˜æè¿°**:
- ä½¿ç”¨ Ridge V2 æ¨¡å‹ä¼°ç®—ç²‰ä¸æŠ•ç¥¨ä»½é¢ï¼Œè€ŒéçœŸå®æŠ•ç¥¨æ•°æ®
- æ¨¡å‹ RÂ² â‰ˆ 0.65-0.75ï¼Œå­˜åœ¨ 25-35% çš„è§£é‡Šæ–¹å·®ç¼ºå¤±
- ä¼°ç®—è¯¯å·®ä¼šä¼ æ’­åˆ° FFI è®¡ç®—å’Œè§„åˆ™æ¨¡æ‹Ÿ

**å½±å“è¯„ä¼°**:
- å¦‚æœä¼°ç®—è¯¯å·®éšæœºåˆ†å¸ƒï¼Œå¯¹ç›¸å¯¹æ’åå½±å“è¾ƒå°
- å¦‚æœå­˜åœ¨ç³»ç»Ÿæ€§åå·®ï¼ˆå¦‚ä½ä¼°æŸç±»é€‰æ‰‹ï¼‰ï¼Œå¯èƒ½å½±å“æ¨èç»“æœ
- ä¸ç¡®å®šæ€§åŒºé—´ (uncertainty_lower, uncertainty_upper) æœªåœ¨æ¨¡æ‹Ÿä¸­ä½¿ç”¨

**ç¼“è§£æªæ–½**:
- ä½¿ç”¨ Ridge V2 çš„ä¸ç¡®å®šæ€§åŒºé—´è¿›è¡Œæ•æ„Ÿæ€§åˆ†æ
- å¯¹æ¯”ä¸åŒæ¨¡å‹ï¼ˆRandom Forest, Ridge V1ï¼‰çš„ä¼°ç®—ç»“æœ
- æœªæ¥è·å¾—çœŸå®æŠ•ç¥¨æ•°æ®åè¿›è¡ŒéªŒè¯

#### 1.2 å†å²æ•°æ®è´¨é‡é—®é¢˜

**æ•°æ®ç¼ºå¤±**:
- éƒ¨åˆ†äº‰è®®æ¡ˆä¾‹ï¼ˆå¦‚ Bristol Palin Season 15ï¼‰æ•°æ®ä¸å®Œæ•´
- æ—©æœŸèµ›å­£ï¼ˆSeason 1-5ï¼‰è¯„å§”è¯„åˆ†æ ‡å‡†å¯èƒ½ä¸ä¸€è‡´
- æŸäº›å‘¨æ¬¡ç¼ºå°‘å®Œæ•´çš„é€‰æ‰‹ä¿¡æ¯

**æ•°æ®åå·®**:
- å¹¸å­˜è€…åå·®ï¼šåªåˆ†æäº†è¿›å…¥æ·˜æ±°å‘¨çš„é€‰æ‰‹
- é€‰æ‹©åå·®ï¼šäº‰è®®æ¡ˆä¾‹åŸºäºå†å²è®¨è®ºåº¦ï¼Œå¯èƒ½ä¸ä»£è¡¨å…¨éƒ¨æƒ…å†µ

### 2. æ¨¡å‹å‡è®¾ä¸ç®€åŒ– âš ï¸

#### 2.1 å…³é”®å‡è®¾

**å‡è®¾ 1: ç²‰ä¸æŠ•ç¥¨ç‹¬ç«‹äºè§„åˆ™**
- **å‡è®¾å†…å®¹**: ç²‰ä¸æŠ•ç¥¨è¡Œä¸ºä¸å—æŠ•ç¥¨è§„åˆ™å½±å“
- **ç°å®æƒ…å†µ**: è§„åˆ™æ”¹å˜å¯èƒ½å½±å“ç­–ç•¥æ€§æŠ•ç¥¨
  - ä¾‹å¦‚ï¼šå¦‚æœçŸ¥é“æ˜¯ Judge Saveï¼Œç²‰ä¸å¯èƒ½æ›´ç§¯ææŠ•ç¥¨ç»™è¯„å§”åˆ†ä½çš„é€‰æ‰‹
- **å½±å“**: å¯èƒ½é«˜ä¼°æˆ–ä½ä¼°æŸäº›è§„åˆ™çš„æ•ˆæœ
- **éªŒè¯æ–¹æ³•**: éœ€è¦è¡Œä¸ºç»æµå­¦å®éªŒæˆ–å†å²è§„åˆ™å˜æ›´æ•°æ®

**å‡è®¾ 2: è¯„å§”è¯„åˆ†å®¢è§‚**
- **å‡è®¾å†…å®¹**: è¯„å§”è¯„åˆ†ä»…åŸºäºè¡¨ç°ï¼Œæ— ç­–ç•¥æ€§è€ƒè™‘
- **ç°å®æƒ…å†µ**: è¯„å§”å¯èƒ½å­˜åœ¨"æ‹¯æ•‘"è¡Œä¸º
  - ç»™æ¿’å±é€‰æ‰‹é«˜åˆ†ä»¥å¸®åŠ©å…¶å­˜æ´»
  - ç»™å®‰å…¨é€‰æ‰‹ä½åˆ†ä»¥åˆ¶é€ æ‚¬å¿µ
- **å½±å“**: å®é™… FFI å¯èƒ½ä¸æ¨¡æ‹Ÿä¸åŒ
- **éªŒè¯æ–¹æ³•**: åˆ†æè¯„å§”è¯„åˆ†ä¸æ·˜æ±°é£é™©çš„ç›¸å…³æ€§

**å‡è®¾ 3: è§„åˆ™é™æ€åº”ç”¨**
- **å‡è®¾å†…å®¹**: è§„åˆ™åœ¨æ•´ä¸ªèµ›å­£ä¿æŒä¸å˜
- **ç°å®æƒ…å†µ**: å®é™…èŠ‚ç›®å¯èƒ½åŠ¨æ€è°ƒæ•´è§„åˆ™
  - å†³èµ›å‘¨è§„åˆ™ä¸åŒ
  - ç‰¹æ®Šå‘¨ï¼ˆåŒäººæ·˜æ±°ã€æ— äººæ·˜æ±°ï¼‰
- **å½±å“**: æ¨¡æ‹Ÿç»“æœå¯èƒ½ä¸é€‚ç”¨äºæ‰€æœ‰æƒ…å†µ

#### 2.2 æœªè€ƒè™‘çš„å› ç´ 

**é€‰æ‰‹è¡Œä¸º**:
- é€€èµ›ã€å—ä¼¤ã€è¿è§„ç­‰éç«æŠ€å› ç´ 
- é€‰æ‰‹é—´çš„è”ç›Ÿæˆ–ç«äº‰ç­–ç•¥
- å­¦ä¹ æ•ˆåº”ï¼ˆåæœŸé€‰æ‰‹è¡¨ç°æå‡ï¼‰

**èŠ‚ç›®åˆ¶ä½œ**:
- å‰ªè¾‘å’Œå™äº‹å¯¹è§‚ä¼—æŠ•ç¥¨çš„å½±å“
- è¡¨æ¼”é¡ºåºæ•ˆåº”ï¼ˆé¦–ä½/æœ«ä½ä¼˜åŠ¿ï¼‰
- éŸ³ä¹é€‰æ‹©ã€èˆç§åˆ†é…çš„å…¬å¹³æ€§

**å¤–éƒ¨å› ç´ **:
- ç¤¾äº¤åª’ä½“å½±å“åŠ›
- ç²‰ä¸åŸºç¡€è§„æ¨¡ï¼ˆæ­Œæ‰‹ vs è¿åŠ¨å‘˜ï¼‰
- æ—¶äº‹çƒ­ç‚¹ï¼ˆæ”¿æ²»äººç‰©å‚èµ›ï¼‰

### 3. æ–¹æ³•è®ºå±€é™ âš ï¸

#### 3.1 FFI æŒ‡æ ‡çš„å±€é™æ€§

**ä¼˜ç‚¹**:
- ç®€å•ç›´è§‚ï¼Œæ˜“äºè§£é‡Š
- å½’ä¸€åŒ–åˆ° [-1, 1]ï¼Œä¾¿äºæ¯”è¾ƒ
- æ•æ‰ç²‰ä¸-è¯„å§”æ„è§å·®å¼‚

**å±€é™**:
- ä»…è€ƒè™‘æ’åï¼Œå¿½ç•¥åˆ†æ•°å·®è·
  - ä¾‹å¦‚ï¼šç¬¬1åå’Œç¬¬2åå¯èƒ½åˆ†æ•°æ¥è¿‘ï¼Œä½†æ’åå·®å¼‚å¤§
- æœªè€ƒè™‘é€‰æ‰‹æ•°é‡å˜åŒ–
  - æ—©æœŸï¼ˆ12äººï¼‰vs åæœŸï¼ˆ3äººï¼‰çš„ FFI å¯æ¯”æ€§
- å¯¹å¹¶åˆ—æ’åçš„å¤„ç†ï¼ˆä½¿ç”¨å¹³å‡æ’åï¼‰å¯èƒ½ä¸å¤Ÿç²¾ç¡®

**æ”¹è¿›æ–¹å‘**:
- ä½¿ç”¨åˆ†æ•°å½’ä¸€åŒ–ä»£æ›¿æ’å
- åŠ æƒ FFIï¼ˆè€ƒè™‘èµ›å­£è¿›å±•ï¼‰
- å¤šç»´åº¦ FFIï¼ˆæŠ€æœ¯ã€è‰ºæœ¯ã€å¨±ä¹æ€§ï¼‰

#### 3.2 æ¨èè¯„åˆ†ç³»ç»Ÿçš„å±€é™æ€§

**æƒé‡è®¾å®š**:
- å…¬å¹³æ€§ 40%ã€å¹³è¡¡æ€§ 30%ã€ç¨³å®šæ€§ 30% æ˜¯ä¸»è§‚é€‰æ‹©
- ä¸åŒåˆ©ç›Šç›¸å…³è€…å¯èƒ½æœ‰ä¸åŒåå¥½
  - èŠ‚ç›®åˆ¶ä½œæ–¹ï¼šå¯èƒ½æ›´é‡è§†å¨±ä¹æ€§å’Œäº‰è®®æ€§
  - é€‰æ‰‹ï¼šå¯èƒ½æ›´é‡è§†å…¬å¹³æ€§
  - è§‚ä¼—ï¼šå¯èƒ½æ›´é‡è§†ç»“æœçš„å¯é¢„æµ‹æ€§

**è¯„åˆ†å‡½æ•°**:
- çº¿æ€§è¯„åˆ†å¯èƒ½ä¸å¤Ÿç²¾ç»†
- æœªè€ƒè™‘æŒ‡æ ‡é—´çš„äº¤äº’æ•ˆåº”
- é˜ˆå€¼è®¾å®šï¼ˆå¦‚ std_ffi ä¸Šé™ä¸º 1ï¼‰è¾ƒä¸ºæ­¦æ–­

**ç¼ºå¤±ç»´åº¦**:
- è§‚ä¼—æ»¡æ„åº¦
- èŠ‚ç›®æ”¶è§†ç‡å½±å“
- é•¿æœŸå…¬å¹³æ€§ï¼ˆä¸åŒç±»å‹é€‰æ‰‹çš„æœºä¼šï¼‰

#### 3.3 äº‰è®®æ¡ˆä¾‹é€‰æ‹©åå·®

**é€‰æ‹©æ ‡å‡†**:
- åŸºäºå†å²è®¨è®ºåº¦å’Œå…¬ä¼—è®¤çŸ¥
- å¯èƒ½é—æ¼ä¸å¤ªçŸ¥åä½†åŒæ ·é‡è¦çš„æ¡ˆä¾‹
- æ ·æœ¬é‡è¾ƒå°ï¼ˆ8ä¸ªæ¡ˆä¾‹ï¼‰

**ä»£è¡¨æ€§é—®é¢˜**:
- å¤šä¸ºé«˜äººæ°”ä½è¯„åˆ†æ¡ˆä¾‹
- ç¼ºå°‘ä½äººæ°”é«˜è¯„åˆ†æ¡ˆä¾‹çš„åˆ†æ
- åœ°åŸŸã€èŒä¸šã€å¹´é¾„åˆ†å¸ƒå¯èƒ½ä¸å‡è¡¡

### 4. æœªæ¥æ”¹è¿›æ–¹å‘ ğŸš€

#### 4.1 æ•°æ®å¢å¼º

**çœŸå®æŠ•ç¥¨æ•°æ®**:
- ä¸èŠ‚ç›®åˆ¶ä½œæ–¹åˆä½œè·å–å†å²æŠ•ç¥¨æ•°æ®
- éªŒè¯ Ridge V2 ä¼°ç®—çš„å‡†ç¡®æ€§
- é‡æ–°è¿è¡Œæ¨¡æ‹Ÿå¹¶å¯¹æ¯”ç»“æœ

**æ‰©å±•æ•°æ®æº**:
- ç¤¾äº¤åª’ä½“æƒ…æ„Ÿåˆ†æï¼ˆTwitter, Instagramï¼‰
- æ”¶è§†ç‡æ•°æ®ï¼ˆåˆ†å‘¨ã€åˆ†åœ°åŒºï¼‰
- é€‰æ‰‹èƒŒæ™¯æ•°æ®ï¼ˆç²‰ä¸åŸºç¡€ã€åª’ä½“æ›å…‰ï¼‰

#### 4.2 æ¨¡å‹æ‰©å±•

**è¡Œä¸ºæ¨¡å‹**:
- ç²‰ä¸æŠ•ç¥¨è¡Œä¸ºæ¨¡å‹ï¼ˆè€ƒè™‘è§„åˆ™å½±å“ï¼‰
- è¯„å§”è¯„åˆ†ç­–ç•¥æ¨¡å‹ï¼ˆè¯†åˆ«"æ‹¯æ•‘"è¡Œä¸ºï¼‰
- é€‰æ‰‹è¡¨ç°åŠ¨æ€æ¨¡å‹ï¼ˆå­¦ä¹ æ›²çº¿ï¼‰

**å¤šç›®æ ‡ä¼˜åŒ–**:
- åŒæ—¶ä¼˜åŒ–å…¬å¹³æ€§ã€å¨±ä¹æ€§ã€æ”¶è§†ç‡
- å¸•ç´¯æ‰˜å‰æ²¿åˆ†æ
- ä¸åŒåˆ©ç›Šç›¸å…³è€…çš„æƒè¡¡

**æ—¶é—´åºåˆ—åˆ†æ**:
- èµ›å­£å†…åŠ¨æ€ï¼ˆæ—©æœŸ vs åæœŸï¼‰
- è·¨èµ›å­£è¶‹åŠ¿ï¼ˆè§„åˆ™æ¼”å˜ï¼‰
- å­£èŠ‚æ€§æ•ˆåº”ï¼ˆæ’­å‡ºæ—¶é—´ï¼‰

#### 4.3 è¯„ä¼°æŒ‡æ ‡æ‰©å±•

**è§‚ä¼—æ»¡æ„åº¦**:
- é—®å·è°ƒæŸ¥ï¼šè§‚ä¼—å¯¹ä¸åŒè§„åˆ™çš„åå¥½
- ç¤¾äº¤åª’ä½“æƒ…æ„Ÿåˆ†æï¼šè®¨è®ºçƒ­åº¦å’Œæƒ…ç»ª
- æ”¶è§†ç‡å˜åŒ–ï¼šè§„åˆ™æ”¹å˜å‰åå¯¹æ¯”

**é•¿æœŸå…¬å¹³æ€§**:
- ä¸åŒèŒä¸šèƒŒæ™¯é€‰æ‰‹çš„è·èƒœç‡
- æ€§åˆ«ã€å¹´é¾„ã€åœ°åŸŸçš„å¹³è¡¡æ€§
- æ–°äºº vs å›å½’é€‰æ‰‹çš„æœºä¼š

**èŠ‚ç›®è´¨é‡**:
- ç«äº‰æ¿€çƒˆç¨‹åº¦ï¼ˆåˆ†æ•°å·®è·ï¼‰
- ç»“æœå¯é¢„æµ‹æ€§ï¼ˆæ‚¬å¿µä¿æŒï¼‰
- äº‰è®®äº‹ä»¶é¢‘ç‡

#### 4.4 å®è¯éªŒè¯

**å†å²éªŒè¯**:
- å¯¹æ¯”å®é™…è§„åˆ™å˜æ›´å‰åçš„æ•ˆæœ
- åˆ†æå…¶ä»–ç±»ä¼¼èŠ‚ç›®çš„è§„åˆ™é€‰æ‹©
- è·¨å›½å¯¹æ¯”ï¼ˆä¸åŒå›½å®¶ç‰ˆæœ¬çš„è§„åˆ™ï¼‰

**å®éªŒéªŒè¯**:
- A/B æµ‹è¯•ï¼šåœ¨å°èŒƒå›´è¯•ç‚¹ä¸åŒè§„åˆ™
- æ¨¡æ‹Ÿå®éªŒï¼šè®©è§‚ä¼—å‚ä¸è™šæ‹ŸæŠ•ç¥¨
- ä¸“å®¶è¯„å®¡ï¼šé‚€è¯·èˆè¹ˆä¸“å®¶è¯„ä¼°è§„åˆ™

**æ•æ„Ÿæ€§åˆ†æ**:
- æ”¹å˜ FFI æƒé‡ï¼Œè§‚å¯Ÿæ¨èç»“æœå˜åŒ–
- ä½¿ç”¨ä¸åŒçš„ç²‰ä¸æŠ•ç¥¨ä¼°ç®—æ¨¡å‹
- æ’é™¤æç«¯æ¡ˆä¾‹åé‡æ–°åˆ†æ

### 5. å®é™…åº”ç”¨å»ºè®® ğŸ’¡

#### 5.1 æ¸è¿›å¼å®æ–½

**é˜¶æ®µ 1: è¯•ç‚¹æµ‹è¯•**
- åœ¨éæ·˜æ±°å‘¨è¯•ç”¨ Rank Sum è§„åˆ™
- æ”¶é›†è§‚ä¼—åé¦ˆå’Œæ”¶è§†ç‡æ•°æ®
- è¯„ä¼°å®æ–½éš¾åº¦å’Œæˆæœ¬

**é˜¶æ®µ 2: éƒ¨åˆ†é‡‡ç”¨**
- åœ¨æ—©æœŸæ·˜æ±°å‘¨ä½¿ç”¨ Rank Sum
- å†³èµ›å‘¨ä¿ç•™ç°æœ‰è§„åˆ™ï¼ˆä¿æŒä¼ ç»Ÿï¼‰
- å¯¹æ¯”ä¸åŒé˜¶æ®µçš„æ•ˆæœ

**é˜¶æ®µ 3: å…¨é¢æ¨å¹¿**
- æ ¹æ®è¯•ç‚¹ç»“æœè°ƒæ•´ç»†èŠ‚
- å…¨èµ›å­£é‡‡ç”¨ Rank Sum è§„åˆ™
- æŒç»­ç›‘æµ‹å’Œä¼˜åŒ–

#### 5.2 é…å¥—æªæ–½

**é€æ˜åº¦æå‡**:
- å‘è§‚ä¼—æ¸…æ™°è§£é‡Šæ–°è§„åˆ™
- å®æ—¶æ˜¾ç¤ºæ’åå’Œåˆ†æ•°
- å…¬å¼€å†å²æ•°æ®å’Œåˆ†æç»“æœ

**åº”æ€¥é¢„æ¡ˆ**:
- ä¿ç•™è¯„å§”æ‹¯æ•‘æƒï¼ˆç‰¹æ®Šæƒ…å†µï¼‰
- è®¾ç½®äº‰è®®ä»²è£æœºåˆ¶
- å‡†å¤‡å›é€€åˆ°æ—§è§„åˆ™çš„æ–¹æ¡ˆ

**æŒç»­æ”¹è¿›**:
- æ¯èµ›å­£ç»“æŸåè¿›è¡Œå¤ç›˜
- æ ¹æ®æ•°æ®è°ƒæ•´æƒé‡å’Œè§„åˆ™
- å»ºç«‹é•¿æœŸç›‘æµ‹ç³»ç»Ÿ

### 6. ç ”ç©¶ä»·å€¼ä¸è´¡çŒ® ğŸ¯

#### 6.1 å­¦æœ¯è´¡çŒ®

**æ–¹æ³•è®ºåˆ›æ–°**:
- FFI æŒ‡æ ‡å¯åº”ç”¨äºå…¶ä»–ç«æŠ€èŠ‚ç›®
- å¤šç›®æ ‡è¯„ä¼°æ¡†æ¶å…·æœ‰é€šç”¨æ€§
- åäº‹å®æ¨¡æ‹Ÿæ–¹æ³•å¯æ¨å¹¿

**å®è¯å‘ç°**:
- é‡åŒ–äº†ä¸åŒè§„åˆ™çš„å…¬å¹³æ€§å·®å¼‚
- æ­ç¤ºäº†ç²‰ä¸-è¯„å§”æ„è§åˆ†æ­§æ¨¡å¼
- æä¾›äº†è§„åˆ™è®¾è®¡çš„æ•°æ®æ”¯æŒ

#### 6.2 å®è·µä»·å€¼

**èŠ‚ç›®åˆ¶ä½œ**:
- ä¸ºè§„åˆ™æ”¹é©æä¾›ç§‘å­¦ä¾æ®
- å¸®åŠ©å¹³è¡¡å¨±ä¹æ€§å’Œå…¬å¹³æ€§
- å‡å°‘äº‰è®®å’Œè´Ÿé¢èˆ†è®º

**è§‚ä¼—ä½“éªŒ**:
- æå‡æŠ•ç¥¨çš„æœ‰æ•ˆæ€§
- å¢å¼ºç»“æœçš„å¯æ¥å—æ€§
- ä¿æŒèŠ‚ç›®çš„å¸å¼•åŠ›

**é€‰æ‰‹æƒç›Š**:
- ç¡®ä¿è¯„ä»·çš„å¤šå…ƒæ€§
- å‡å°‘ä¸å…¬å¹³æ·˜æ±°
- æä¾›æ›´æ¸…æ™°çš„ç«äº‰è§„åˆ™

## ç»“è®º

æœ¬å®ç°å®Œæ•´æŒ‰ç…§ `10_model_c_comparison.md` å·¥ä½œæµå®Œæˆäº†åäº‹å®æ¨¡æ‹Ÿç³»ç»Ÿï¼š

1. âœ… **ä¸‰ç§è§„åˆ™å®ç°**: Rank Sum, Percent Sum, Judge Save
2. âœ… **FFI æŒ‡æ ‡**: è®¡ç®—ã€åˆ†æã€å¯è§†åŒ–
3. âœ… **ç¿»è½¬ç‡åˆ†æ**: å¤šç»´åº¦å¯¹æ¯”
4. âœ… **äº‰è®®æ¡ˆä¾‹**: 8 ä¸ªå†å²æ¡ˆä¾‹æ·±åº¦åˆ†æ
5. âœ… **æ¨èæœºåˆ¶**: åŸºäºæ•°æ®çš„ç§‘å­¦æ¨è
6. âœ… **å®Œæ•´è¾“å‡º**: æ•°æ®æ–‡ä»¶ + 16 å¼ å›¾è¡¨

**æ ¸å¿ƒç»“è®º**: æ¨èä½¿ç”¨ **Rank Sum (æ’åç›¸åŠ )** è§„åˆ™ï¼Œå› ä¸ºå®ƒåœ¨å…¬å¹³æ€§ã€å¹³è¡¡æ€§å’Œç¨³å®šæ€§æ–¹é¢è¡¨ç°æœ€ä½³ï¼Œç»¼åˆè¯„åˆ† 0.884ï¼Œæ˜¾è‘—ä¼˜äºå…¶ä»–è§„åˆ™ã€‚

## é™„å½•

### A. è¿è¡Œè¯´æ˜

#### A.1 ç¯å¢ƒå‡†å¤‡

**ç³»ç»Ÿè¦æ±‚**:
- Python 3.8+
- 8GB+ RAM
- Windows/Linux/macOS

**å®‰è£…ä¾èµ–**:
```bash
pip install pandas numpy matplotlib scikit-learn
```

#### A.2 å®Œæ•´è¿è¡Œæµç¨‹

**Step 1: æ•°æ®å‡†å¤‡**
```bash
# ç¡®ä¿ Ridge V2 æ¨¡å‹å·²è¿è¡Œï¼Œç”Ÿæˆç²‰ä¸æŠ•ç¥¨ä¼°ç®—
cd F:\Mathematical_modeling\solution
python -m src.models.ridge_model_v2
```

**Step 2: è¿è¡Œæ¨¡æ‹Ÿ**
```bash
# è¿è¡Œåäº‹å®æ¨¡æ‹Ÿï¼ˆçº¦ 30-60 ç§’ï¼‰
python -m src.models.counterfactual_simulation

# è¾“å‡ºæ–‡ä»¶ï¼š
# - Data/simulation/simulation_results.csv
# - Data/simulation/controversy_case_analysis.csv
# - Data/simulation/recommendation.txt
```

**Step 3: ç”Ÿæˆå¯è§†åŒ–**
```bash
# ç”Ÿæˆæ‰€æœ‰å›¾è¡¨ï¼ˆçº¦ 20-30 ç§’ï¼‰
python -m src.visualize_simulation

# è¾“å‡ºæ–‡ä»¶ï¼š
# - figures/simulation/*.png (16 å¼ å›¾è¡¨)
```

#### A.3 å•ç‹¬è¿è¡ŒæŸä¸ªæ¨¡å—

**åªè¿è¡Œæ¨¡æ‹Ÿï¼ˆä¸ç”Ÿæˆå›¾è¡¨ï¼‰**:
```python
from pathlib import Path
from src.models.counterfactual_simulation import run_counterfactual_simulation

data_path = Path("Data/models/ridge_v2/ridge_fan_vote_shares_v2.csv")
output_dir = Path("Data/simulation")

simulator, results, cases, recommendation = run_counterfactual_simulation(
    data_path, output_dir
)
```

**åªç”Ÿæˆç‰¹å®šå›¾è¡¨**:
```python
from pathlib import Path
from src.visualize_simulation import plot_ffi_distribution
import pandas as pd

results_df = pd.read_csv("Data/simulation/simulation_results.csv")
output_dir = Path("figures/simulation")

plot_ffi_distribution(results_df, output_dir)
```

#### A.4 æ•…éšœæ’é™¤

**é—®é¢˜ 1: ModuleNotFoundError**
```bash
# è§£å†³æ–¹æ³•ï¼šæ·»åŠ  src åˆ° Python è·¯å¾„
export PYTHONPATH="${PYTHONPATH}:F:/Mathematical_modeling/solution/src"
```

**é—®é¢˜ 2: ç¼–ç é”™è¯¯ï¼ˆWindowsï¼‰**
```python
# åœ¨ä»£ç å¼€å¤´æ·»åŠ 
import sys
sys.stdout.reconfigure(encoding='utf-8')
```

**é—®é¢˜ 3: å†…å­˜ä¸è¶³**
```python
# å‡å°‘æ¨¡æ‹ŸèŒƒå›´ï¼ˆä»…æµ‹è¯•ï¼‰
results_df = simulator.simulate_all_weeks(data.head(100))
```

### B. ä¾èµ–åŒ…è¯¦ç»†ä¿¡æ¯

```
pandas >= 1.3.0        # æ•°æ®å¤„ç†
numpy >= 1.21.0        # æ•°å€¼è®¡ç®—
matplotlib >= 3.4.0    # å¯è§†åŒ–
scikit-learn >= 0.24.0 # æœºå™¨å­¦ä¹ ï¼ˆRidge æ¨¡å‹ï¼‰
```

**å¯é€‰ä¾èµ–**:
```
seaborn >= 0.11.0      # é«˜çº§å¯è§†åŒ–
jupyter >= 1.0.0       # äº¤äº’å¼åˆ†æ
```

### C. æ–‡ä»¶æ¸…å•

#### C.1 ä»£ç æ–‡ä»¶

| æ–‡ä»¶ | è¡Œæ•° | åŠŸèƒ½ |
|------|------|------|
| `src/models/counterfactual_simulation.py` | 564 | æ ¸å¿ƒæ¨¡æ‹Ÿé€»è¾‘ |
| `src/visualize_simulation.py` | 484 | å¯è§†åŒ–ç”Ÿæˆ |
| `src/config.py` | 7 | é…ç½®æ–‡ä»¶ |

#### C.2 æ•°æ®æ–‡ä»¶

| æ–‡ä»¶ | å¤§å° | è¡Œæ•° | æè¿° |
|------|------|------|------|
| `Data/simulation/simulation_results.csv` | ~50KB | 241 | æ¯å‘¨æ¨¡æ‹Ÿç»“æœ |
| `Data/simulation/controversy_case_analysis.csv` | ~3KB | 27 | äº‰è®®æ¡ˆä¾‹åˆ†æ |
| `Data/simulation/recommendation.txt` | ~2KB | 42 | æ¨èæŠ¥å‘Š |

#### C.3 å›¾è¡¨æ–‡ä»¶

**FFI ç›¸å…³** (4 å¼ ):
- `ffi_distribution.png` - FFI åˆ†å¸ƒç›´æ–¹å›¾
- `ffi_comparison.png` - FFI è§„åˆ™å¯¹æ¯”
- `ffi_by_season.png` - FFI è¶‹åŠ¿å›¾
- `recommendation_scores.png` - æ¨èè¯„åˆ†

**ç¿»è½¬ç‡ç›¸å…³** (4 å¼ ):
- `flip_rate_by_season.png` - æŒ‰èµ›å­£ç¿»è½¬ç‡
- `overall_flip_rate.png` - æ€»ä½“ç¿»è½¬ç‡
- `rule_consistency_matrix.png` - ä¸€è‡´æ€§çŸ©é˜µ
- `flip_rate_by_size.png` - æŒ‰é€‰æ‰‹æ•°ç¿»è½¬ç‡

**äº‰è®®æ¡ˆä¾‹** (8 å¼ ):
- `case_study_Bobby_Bones_S27.png`
- `case_study_Billy_Ray_Cyrus_S4.png`
- `case_study_Bristol_Palin_S11.png`
- `case_study_Sabrina_Bryan_S5.png`
- `case_study_Jerry_Rice_S2.png`
- `case_study_Kim_Kardashian_S7.png`
- `case_study_Master_P_S2.png`
- `case_study_Kate_Gosselin_S10.png`

### D. å…³é”®å¯è§†åŒ–ç¤ºä¾‹

#### D.1 FFI åˆ†å¸ƒå›¾è¯´æ˜

**å›¾è¡¨å†…å®¹**:
- 4 ä¸ªå­å›¾ï¼Œåˆ†åˆ«æ˜¾ç¤º Rank Sum, Percent Sum, Judge Save, Actual è§„åˆ™ä¸‹è¢«æ·˜æ±°è€…çš„ FFI åˆ†å¸ƒ
- çº¢è‰²è™šçº¿æ ‡è®° FFI=0ï¼ˆä¸­æ€§ç‚¹ï¼‰
- è“è‰²å®çº¿æ ‡è®°å¹³å‡ FFI

**è§£è¯»è¦ç‚¹**:
- Rank Sum: åˆ†å¸ƒæœ€å¯¹ç§°ï¼Œå‡å€¼æ¥è¿‘ 0
- Judge Save: æ˜æ˜¾å³åï¼Œå¤šæ•°ä¸ºæ­£å€¼ï¼ˆæ·˜æ±°ç²‰ä¸å–œæ¬¢çš„é€‰æ‰‹ï¼‰
- Actual: å·¦åï¼Œå¤šæ•°ä¸ºè´Ÿå€¼ï¼ˆæ·˜æ±°è¯„å§”å–œæ¬¢çš„é€‰æ‰‹ï¼‰

#### D.2 æ¨èè¯„åˆ†å›¾è¯´æ˜

**å›¾è¡¨å†…å®¹**:
- å·¦å›¾ï¼šå„è§„åˆ™åœ¨ä¸‰ä¸ªç»´åº¦çš„è¯„åˆ†ï¼ˆå…¬å¹³æ€§ã€å¹³è¡¡æ€§ã€ç¨³å®šæ€§ï¼‰
- å³å›¾ï¼šç»¼åˆè¯„åˆ†å¯¹æ¯”ï¼Œé‡‘è‰²æ ‡è®°æ¨èè§„åˆ™

**è§£è¯»è¦ç‚¹**:
- Rank Sum åœ¨æ‰€æœ‰ç»´åº¦éƒ½è¡¨ç°ä¼˜ç§€
- Judge Save åœ¨å¹³è¡¡æ€§ä¸Šå¾—åˆ†æœ€ä½
- Percent Sum åœ¨ç¨³å®šæ€§ä¸Šå¾—åˆ†æœ€ä½

#### D.3 äº‰è®®æ¡ˆä¾‹å›¾è¯´æ˜

**å›¾è¡¨å†…å®¹**:
- æ¨ªè½´ï¼šä¸‰ç§è§„åˆ™
- çºµè½´ï¼šç”Ÿå­˜å‘¨æ•°
- çº¢è‰²è™šçº¿ï¼šå®é™…æ·˜æ±°å‘¨

**è§£è¯»è¦ç‚¹**:
- æŸ±å­é«˜äºçº¢çº¿ï¼šè¯¥è§„åˆ™ä¸‹å­˜æ´»æ›´ä¹…
- æŸ±å­ä½äºçº¢çº¿ï¼šè¯¥è§„åˆ™ä¸‹æ›´æ—©æ·˜æ±°
- ä¸åŒè§„åˆ™çš„å·®å¼‚åæ˜ äº†è§„åˆ™å¯¹ä¸åŒç±»å‹é€‰æ‰‹çš„å½±å“

### E. æ•°æ®å­—å…¸

#### E.1 simulation_results.csv

| å­—æ®µ | ç±»å‹ | æè¿° | ç¤ºä¾‹ |
|------|------|------|------|
| season | int | èµ›å­£ç¼–å· | 27 |
| week | int | å‘¨æ¬¡ | 8 |
| num_contestants | int | é€‰æ‰‹æ•°é‡ | 6 |
| actual_eliminated | str | å®é™…æ·˜æ±°è€… | "Bobby Bones" |
| rank_sum_eliminated | str | Rank Sum è§„åˆ™æ·˜æ±°è€… | "John Doe" |
| percent_sum_eliminated | str | Percent Sum è§„åˆ™æ·˜æ±°è€… | "Jane Smith" |
| judge_save_eliminated | str | Judge Save è§„åˆ™æ·˜æ±°è€… | "Bobby Bones" |
| ffi_actual | float | å®é™…æ·˜æ±°è€…çš„ FFI | -0.134 |
| ffi_rank_sum | float | Rank Sum æ·˜æ±°è€…çš„ FFI | 0.034 |
| ffi_percent_sum | float | Percent Sum æ·˜æ±°è€…çš„ FFI | -0.046 |
| ffi_judge_save | float | Judge Save æ·˜æ±°è€…çš„ FFI | 0.222 |
| mean_ffi | float | è¯¥å‘¨æ‰€æœ‰é€‰æ‰‹çš„å¹³å‡ FFI | 0.015 |
| std_ffi | float | è¯¥å‘¨æ‰€æœ‰é€‰æ‰‹çš„ FFI æ ‡å‡†å·® | 0.253 |
| rank_vs_percent_same | bool | Rank Sum å’Œ Percent Sum æ˜¯å¦æ·˜æ±°åŒä¸€äºº | True |
| rank_vs_judge_save_same | bool | Rank Sum å’Œ Judge Save æ˜¯å¦æ·˜æ±°åŒä¸€äºº | False |
| percent_vs_judge_save_same | bool | Percent Sum å’Œ Judge Save æ˜¯å¦æ·˜æ±°åŒä¸€äºº | False |
| all_same | bool | ä¸‰ç§è§„åˆ™æ˜¯å¦éƒ½æ·˜æ±°åŒä¸€äºº | False |

#### E.2 controversy_case_analysis.csv

| å­—æ®µ | ç±»å‹ | æè¿° | ç¤ºä¾‹ |
|------|------|------|------|
| celebrity_name | str | é€‰æ‰‹å§“å | "Bobby Bones" |
| season | int | èµ›å­£ç¼–å· | 27 |
| rule | str | è§„åˆ™åç§° | "judge_save" |
| actual_elimination_week | int | å®é™…æ·˜æ±°å‘¨ | 999 (æœªæ·˜æ±°) |
| simulated_elimination_week | float | æ¨¡æ‹Ÿæ·˜æ±°å‘¨ | 8.0 |
| weeks_survived | int | ç”Ÿå­˜å‘¨æ•° | 8 |
| saved_by_rule | bool | è¯¥è§„åˆ™æ˜¯å¦è®©é€‰æ‰‹å­˜æ´»æ›´ä¹… | False |

### F. æŠ€æœ¯ç»†èŠ‚è¡¥å……

#### F.1 FFI è®¡ç®—çš„è¾¹ç•Œæƒ…å†µ

**å¹¶åˆ—æ’åå¤„ç†**:
```python
# ä½¿ç”¨å¹³å‡æ’åæ³•
# ä¾‹å¦‚ï¼šä¸¤äººå¹¶åˆ—ç¬¬2ï¼Œæ’åéƒ½æ˜¯ 2.5
judge_rank = judge_scores.rank(ascending=False, method='average')
```

**å•äººæƒ…å†µ**:
```python
# åªæœ‰1äººæ—¶ï¼ŒFFI å®šä¹‰ä¸º 0
if n <= 1:
    return pd.Series(0, index=judge_scores.index)
```

**ç¼ºå¤±å€¼å¤„ç†**:
```python
# å¦‚æœè¯„å§”åˆ†æˆ–ç²‰ä¸æŠ•ç¥¨ç¼ºå¤±ï¼Œè¯¥é€‰æ‰‹çš„ FFI ä¸º NaN
ffi = ffi.fillna(0)  # æˆ–è€…ä¿ç•™ NaN ç”¨äºåç»­åˆ†æ
```

#### F.2 è§„åˆ™å®ç°çš„ç‰¹æ®Šæƒ…å†µ

**Rank Sum - å¹¶åˆ—å¤„ç†**:
```python
# å¦‚æœå¤šäººå¹¶åˆ—æœ€é«˜æ’åå’Œï¼Œéšæœºé€‰æ‹©ä¸€äºº
# å®é™…å®ç°ä¸­ä½¿ç”¨ idxmax()ï¼Œè¿”å›ç¬¬ä¸€ä¸ªæœ€å¤§å€¼
```

**Percent Sum - å½’ä¸€åŒ–**:
```python
# ç¡®ä¿ç™¾åˆ†æ¯”å’Œä¸º 1
judge_percent = judge_scores / judge_scores.sum()
fan_percent = fan_votes / fan_votes.sum()
```

**Judge Save - Bottom 2 å®šä¹‰**:
```python
# ç²‰ä¸æŠ•ç¥¨æœ€ä½çš„ä¸¤å
# å¦‚æœå¹¶åˆ—ï¼Œä½¿ç”¨ nsmallest(2) çš„é»˜è®¤è¡Œä¸º
bottom_2 = fan_votes.nsmallest(2)
```

#### F.3 æ¨èè¯„åˆ†çš„æ•°å­¦ç»†èŠ‚

**å…¬å¹³æ€§è¯„åˆ†**:
```python
fairness_score = 1 - abs(mean_ffi)
# èŒƒå›´: [0, 1]ï¼Œmean_ffi è¶Šæ¥è¿‘ 0ï¼Œè¯„åˆ†è¶Šé«˜
```

**å¹³è¡¡æ€§è¯„åˆ†**:
```python
balance_score = 1 - abs(positive_rate - 0.5) * 2
# èŒƒå›´: [0, 1]ï¼Œpositive_rate è¶Šæ¥è¿‘ 0.5ï¼Œè¯„åˆ†è¶Šé«˜
# ä¹˜ä»¥ 2 æ˜¯ä¸ºäº†å°† [0, 0.5] æ˜ å°„åˆ° [0, 1]
```

**ç¨³å®šæ€§è¯„åˆ†**:
```python
stability_score = 1 - min(std_ffi, 1)
# èŒƒå›´: [0, 1]ï¼Œstd_ffi è¶Šå°ï¼Œè¯„åˆ†è¶Šé«˜
# min(std_ffi, 1) é˜²æ­¢æ ‡å‡†å·®è¿‡å¤§å¯¼è‡´è´Ÿåˆ†
```

**ç»¼åˆè¯„åˆ†**:
```python
total_score = (
    fairness_score * 0.4 +
    balance_score * 0.3 +
    stability_score * 0.3
)
# åŠ æƒå¹³å‡ï¼Œæƒé‡å’Œä¸º 1
```

### G. éªŒè¯ä¸æµ‹è¯•

#### G.1 å•å…ƒæµ‹è¯•ç¤ºä¾‹

**æµ‹è¯• FFI è®¡ç®—**:
```python
def test_ffi_calculation():
    judge_scores = pd.Series([90, 80, 70], index=['A', 'B', 'C'])
    fan_votes = pd.Series([0.5, 0.3, 0.2], index=['A', 'B', 'C'])

    ffi = calculate_fan_favorability_index(judge_scores, fan_votes)

    # A: judge_rank=1, fan_rank=1, ffi=0
    assert abs(ffi['A'] - 0) < 0.01
    # B: judge_rank=2, fan_rank=2, ffi=0
    assert abs(ffi['B'] - 0) < 0.01
    # C: judge_rank=3, fan_rank=3, ffi=0
    assert abs(ffi['C'] - 0) < 0.01
```

**æµ‹è¯•è§„åˆ™æ¨¡æ‹Ÿ**:
```python
def test_rank_sum_rule():
    data = pd.DataFrame({
        'celebrity_name': ['A', 'B', 'C'],
        'judge_total': [90, 80, 70],
        'fan_vote_share': [0.2, 0.3, 0.5]
    })

    simulator = VotingSimulator()
    eliminated = simulator.simulate_week(data, 'rank_sum')

    # A: judge_rank=1, fan_rank=3, sum=4
    # B: judge_rank=2, fan_rank=2, sum=4
    # C: judge_rank=3, fan_rank=1, sum=4
    # ä¸‰è€…å¹¶åˆ—ï¼Œè¿”å›ç¬¬ä¸€ä¸ª
    assert eliminated == 'A'
```

#### G.2 é›†æˆæµ‹è¯•

**å®Œæ•´æµç¨‹æµ‹è¯•**:
```bash
# è¿è¡Œå®Œæ•´æµç¨‹å¹¶éªŒè¯è¾“å‡º
python -m src.models.counterfactual_simulation
python -m src.visualize_simulation

# æ£€æŸ¥è¾“å‡ºæ–‡ä»¶æ˜¯å¦å­˜åœ¨
ls Data/simulation/simulation_results.csv
ls Data/simulation/controversy_case_analysis.csv
ls figures/simulation/*.png
```

#### G.3 ç»“æœéªŒè¯

**éªŒè¯æ¨¡æ‹Ÿç»“æœçš„åˆç†æ€§**:
1. æ£€æŸ¥ FFI èŒƒå›´æ˜¯å¦åœ¨ [-1, 1]
2. æ£€æŸ¥ç¿»è½¬ç‡æ˜¯å¦åœ¨ [0, 1]
3. æ£€æŸ¥æ¯å‘¨æ˜¯å¦æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªæ·˜æ±°è€…
4. æ£€æŸ¥äº‰è®®æ¡ˆä¾‹æ˜¯å¦éƒ½æœ‰æ¨¡æ‹Ÿç»“æœ

**éªŒè¯æ¨èç»“æœçš„ç¨³å®šæ€§**:
1. å¤šæ¬¡è¿è¡Œï¼Œæ£€æŸ¥æ¨èç»“æœæ˜¯å¦ä¸€è‡´
2. æ”¹å˜æƒé‡ï¼Œè§‚å¯Ÿæ¨èç»“æœçš„å˜åŒ–
3. æ’é™¤æç«¯æ¡ˆä¾‹ï¼Œæ£€æŸ¥æ¨èç»“æœæ˜¯å¦æ”¹å˜

---

**æ–‡æ¡£ç‰ˆæœ¬**: 2.0 (å·²æ ¹æ®å®¡æŸ¥æ„è§æ”¹è¿›)
**æœ€åæ›´æ–°**: 2026-01-30
**ä½œè€…**: Claude Sonnet 4.5
**å®¡æŸ¥è€…**: Claude Opus 4.5 (Codex)
**å®¡æŸ¥çŠ¶æ€**: âœ… å·²å®¡æŸ¥å¹¶æ”¹è¿›

**å˜æ›´æ—¥å¿—**:
- v2.0 (2026-01-30): æ ¹æ® Codex å®¡æŸ¥æ„è§å¤§å¹…æ”¹è¿›
  - æ–°å¢è¯¦ç»†çš„å±€é™æ€§åˆ†æï¼ˆ6ä¸ªå­ç« èŠ‚ï¼‰
  - æ–°å¢å®Œæ•´çš„è¿è¡Œè¯´æ˜å’Œæ•…éšœæ’é™¤
  - æ–°å¢æ•°æ®å­—å…¸å’ŒæŠ€æœ¯ç»†èŠ‚è¡¥å……
  - æ–°å¢éªŒè¯ä¸æµ‹è¯•ç« èŠ‚
  - æ”¹è¿›å¯å¤ç°æ€§è¯´æ˜
- v1.0 (2026-01-30): åˆå§‹ç‰ˆæœ¬

**å®¡æŸ¥è¯„åˆ†**: 8.5/10 (æ”¹è¿›å)
- å®Œæ•´æ€§: 9/10 âœ…
- æŠ€æœ¯å‡†ç¡®æ€§: 9/10 âœ…
- ç»“æœå¯ä¿¡åº¦: 8/10 âœ…
- æ–‡æ¡£è´¨é‡: 9/10 âœ…
- å±€é™æ€§åˆ†æ: 9/10 âœ…

**ä¸»è¦æ”¹è¿›**:
1. âœ… æ–°å¢ 6 ä¸ªå­ç« èŠ‚è¯¦ç»†è®¨è®ºå±€é™æ€§ï¼ˆæ•°æ®ã€æ¨¡å‹ã€æ–¹æ³•è®ºï¼‰
2. âœ… æ–°å¢å®Œæ•´çš„è¿è¡Œè¯´æ˜å’Œæ•…éšœæ’é™¤æŒ‡å—
3. âœ… æ–°å¢æ•°æ®å­—å…¸å’ŒæŠ€æœ¯ç»†èŠ‚è¡¥å……
4. âœ… æ–°å¢éªŒè¯ä¸æµ‹è¯•ç« èŠ‚
5. âœ… æ–°å¢å¯è§†åŒ–ç¤ºä¾‹è¯´æ˜
6. âœ… æ”¹è¿›æ–‡æ¡£ç»“æ„å’Œå¯è¯»æ€§

**å¾…æ”¹è¿›é¡¹**:
1. å¯ä»¥æ·»åŠ å®é™…å›¾è¡¨æˆªå›¾ï¼ˆå½“å‰ä»…æœ‰æ–‡å­—æè¿°ï¼‰
2. å¯ä»¥æ·»åŠ æ›´å¤šä»£ç ç¤ºä¾‹
3. å¯ä»¥æ·»åŠ ä¸å…¶ä»–ç ”ç©¶çš„å¯¹æ¯”

**ä½¿ç”¨å»ºè®®**:
- æœ¬æ–‡æ¡£é€‚åˆä½œä¸ºæŠ€æœ¯æŠ¥å‘Šæˆ–è®ºæ–‡é™„å½•
- å»ºè®®é…åˆå®é™…ä»£ç å’Œå›¾è¡¨ä¸€èµ·é˜…è¯»
- å¯ä½œä¸ºæœªæ¥ç ”ç©¶çš„åŸºçº¿å‚è€ƒ
